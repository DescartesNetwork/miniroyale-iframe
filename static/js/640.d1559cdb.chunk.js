(globalThis.webpackChunkmini_royale=globalThis.webpackChunkmini_royale||[]).push([[640],{11084:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Page:()=>C});var s=n(55754),i=n(15780),r=n(92950),o=n(45055),a=n(32659),c=n(9476),l=n(80754),d=n(45263);const u=e=>{let{appId:t,src:n,title:s,background:o}=e;const{setBackground:a}=(0,i.useUI)(),c=(0,r.useMemo)((()=>JSON.stringify(o)),[o]);return(0,r.useEffect)((()=>{c&&a(JSON.parse(c))}),[a,c]),(0,r.useEffect)((()=>new l.Gateway(window.sentre.wallet).terminate),[]),(0,d.jsx)("iframe",{id:t+"-iframe",src:n,title:s,style:{height:"calc(100vh - 64px)",margin:-12,marginTop:-24,border:"none",width:"100vw"},loading:"lazy",allowFullScreen:!0})};var h=n(63805);const p={appId:"mini_royale",url:"https://descartesnetwork.github.io/miniroyale-iframe/index.js"},f={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},mainnet:{node:"https://api.mainnet-beta.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}},m={manifest:{development:{...p},staging:{...p},production:{...p}}[h.OB],sol:f[h.ef]},g=n.p+"static/media/bg.08cabc9a080d99cedcf4.jpeg";var v=n(17100);const{manifest:{appId:y}}=m,T="https://miniroyale.io/",b=()=>{const[e,t]=(0,r.useState)(!0),n=(0,o.useHistory)(),s=(0,r.useCallback)((()=>t(!1)),[]),i=(0,r.useCallback)((()=>n.push("/store")),[n]);return(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(a.Modal,{visible:e,footer:null,closable:!1,children:(0,d.jsxs)(a.Row,{gutter:[36,36],justify:"center",children:[(0,d.jsx)(a.Col,{children:(0,d.jsx)(a.Avatar,{shape:"square",src:v,size:96})}),(0,d.jsx)(a.Col,{span:24,children:(0,d.jsxs)(a.Row,{gutter:[12,12],justify:"center",children:[(0,d.jsx)(a.Col,{children:(0,d.jsx)(a.Typography.Title,{level:3,children:"For Technical Demo Only!"})}),(0,d.jsx)(a.Col,{span:24,children:(0,d.jsxs)(a.Typography.Paragraph,{style:{textAlign:"center"},children:["This product is only for technical demo purposes. If you are intertested in this application, please support the original project,"," ",(0,d.jsx)("a",{href:T,target:"_blank",rel:"noreferrer",children:"Mini Royale: Nations"}),"."]})})]})}),(0,d.jsx)(a.Col,{span:24,children:(0,d.jsxs)(a.Row,{gutter:[16,16],children:[(0,d.jsx)(a.Col,{span:24,children:(0,d.jsxs)(a.Typography.Text,{className:"caption",type:"secondary",children:[(0,d.jsx)(c.Z,{name:"alert-circle-outline"})," By clicking the OK button, you understand and agree with the terms. If there are any copyright/IP issues, please contact us at"," ",(0,d.jsx)("a",{href:"mailto:hi@sentre.io",target:"_blank",rel:"noreferrer",children:"hi@sentre.io"}),"."]})}),(0,d.jsx)(a.Col,{span:24,children:(0,d.jsxs)(a.Row,{gutter:[8,8],children:[(0,d.jsx)(a.Col,{span:24,children:(0,d.jsx)(a.Button,{type:"primary",onClick:s,block:!0,children:"OK"})}),(0,d.jsx)(a.Col,{span:24,children:(0,d.jsx)(a.Button,{type:"text",onClick:i,block:!0,children:"Back"})})]})})]})})]})}),(0,d.jsx)(u,{appId:y,src:e?"":T,title:"Mini Royale: Open economy FPS on #Solana.",background:{light:g,dark:g}})]})};var w=n(19289),S=n(85912);const E="main",N=(0,w.createAsyncThunk)("main/increaseCounter",(async(e,t)=>{let{getState:n}=t;const{main:{counter:s}}=n();return{counter:s+1}})),j=(0,w.createSlice)({name:E,initialState:{counter:0},reducers:{},extraReducers:e=>{e.addCase(N.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)}))}}).reducer,x=(0,w.configureStore)({middleware:e=>e(S.h),devTools:(0,S.$)("mini_royale"),reducer:{main:j}}),{manifest:{appId:A}}=m,C=()=>(0,d.jsx)(i.UIProvider,{appId:A,antd:!0,children:(0,d.jsx)(s.Provider,{store:x,children:(0,d.jsx)(b,{})})})},85912:(e,t,n)=>{"use strict";n.d(t,{$:()=>a,h:()=>c});var s=n(42224),i=n(48744),r=n.n(i),o=n(97429).Buffer;const a=e=>!1;BigInt.prototype.toJSON=function(){return this.toString()};const c={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof s.PublicKey||e instanceof r()||e instanceof o}}},63805:(e,t,n)=>{"use strict";n.d(t,{Bv:()=>o,OB:()=>i,ef:()=>r,f4:()=>c});n(42224);var s=n(53933);const i="production",r=(()=>{switch(s.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})(),o=(()=>{switch(r){case"devnet":return 103;case"testnet":return 102;default:return 101}})(),a={devnet:["https://api.devnet.solana.com","https://psytrbhymqlkfrhudd.dev.genesysgo.net:8899/"],testnet:["https://api.testnet.solana.com"],mainnet:["https://ssc-dao.genesysgo.net/","https://solana-api.projectserum.com","https://solitary-autumn-water.solana-mainnet.quiknode.pro/dcbac9d444818a20ac583541dec35b44c6840888/"]},c=(()=>{const e=a[r],t=e[Math.floor(Math.random()*e.length)];return console.log("Debug OS RPC:",t),t})()},53933:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const s="sentre",i=window.localStorage,r=e=>{try{return e?JSON.parse(e):null}catch(t){return null}},o={set:(e,t)=>{let n=r(i.getItem(s));n&&"object"===typeof n||(n={}),n[e]=t,i.setItem(s,JSON.stringify(n))},get:e=>{let t=r(i.getItem(s));return t&&"object"===typeof t?t[e]:null},clear:e=>{o.set(e,null)}},a=o},39297:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messenger=void 0;const n="sentre";t.Messenger=class{constructor(e){let{name:t="unknown",verbose:s=!1}=e;this.emit=(e,t)=>e.postMessage({type:n,payload:t},"*"),this.listen=e=>{const t=t=>{let{data:{type:s,payload:i},origin:r}=t;if(s===n)return this.verbose&&console.log(this.name,r,i),e(i)};window.addEventListener("message",t);const s=()=>window.removeEventListener("message",t);return this.killers.push(s),s},this.killAll=()=>{for(;this.killers.length>0;){const e=this.killers.pop();e&&e()}},this.name=t,this.verbose=s,this.killers=[]}}},94559:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TIMEOUT=t.EVENTS=void 0,function(e){e[e.CONNECT=0]="CONNECT",e[e.GET_ADDRESS=1]="GET_ADDRESS",e[e.SIGN_TRANSACTION=2]="SIGN_TRANSACTION"}(t.EVENTS||(t.EVENTS={})),t.TIMEOUT=3e3},83179:function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{c(s.next(e))}catch(t){r(t)}}function a(e){try{c(s.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Gateway=void 0;const i=n(42224),r=n(39297),o=n(94559);t.Gateway=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.terminate=()=>this.messenger.killAll(),this.emit=(e,t)=>{const n=document.getElementById(e);if(!n||"IFRAME"!==n.tagName)throw new Error(`Cannot find iframe with id ${e}`);const s=null===n||void 0===n?void 0:n.contentWindow;if(!s)throw new Error("Cannot access to iframe window");return this.messenger.emit(s,t)},this.onConnect=(e,t)=>this.emit(e,{uid:t,event:o.EVENTS.CONNECT,data:!0}),this.onGetAddress=(e,t)=>s(this,void 0,void 0,(function*(){const n=yield this.wallet.getAddress();return this.emit(e,{uid:t,event:o.EVENTS.GET_ADDRESS,data:n})})),this.onSignTransaction=(e,t,n)=>s(this,void 0,void 0,(function*(){const s=i.Transaction.from(n),r=(yield this.wallet.signTransaction(s)).serialize();return this.emit(e,{uid:t,event:o.EVENTS.SIGN_TRANSACTION,data:r})})),this.messenger=new r.Messenger({name:"gateway",verbose:t}),this.wallet=e,this.messenger.listen((e=>{let{id:t,uid:n,event:i,data:r}=e;return s(this,void 0,void 0,(function*(){return i===o.EVENTS.CONNECT?this.onConnect(t,n):i===o.EVENTS.GET_ADDRESS?this.onGetAddress(t,n):i===o.EVENTS.SIGN_TRANSACTION?this.onSignTransaction(t,n,r):void 0}))}))}}},80754:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(39297),t),i(n(94559),t),i(n(83179),t),i(n(17543),t)},17543:function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{c(s.next(e))}catch(t){r(t)}}function a(e){try{c(s.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnector=t.UID=void 0;const i=n(42224),r=n(39297),o=n(94559);t.UID=()=>Math.round(Math.random()*Math.pow(10,9));t.WalletConnector=class{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.interact=e=>{let{event:n,data:i={},timeout:r=o.TIMEOUT}=e;return s(this,void 0,void 0,(function*(){return new Promise(((e,s)=>{try{if(!window.parent)throw new Error("Cannot access to parent window");const o=setTimeout((()=>s("Request timeout")),r),a=this.id,c=(0,t.UID)(),l=this.messenger.listen((t=>{let{event:s,uid:i,data:r}=t;if(n===s&&c===i)return clearTimeout(o),l(),e(r)}));return this.messenger.emit(window.parent,{event:n,id:a,uid:c,data:i})}catch(o){return s(o.message)}}))}))},this.isConnected=()=>s(this,void 0,void 0,(function*(){return yield this.interact({event:o.EVENTS.CONNECT,timeout:o.TIMEOUT})})),this.getAddress=()=>s(this,void 0,void 0,(function*(){return yield this.interact({event:o.EVENTS.GET_ADDRESS,timeout:2*o.TIMEOUT})})),this.signTransaction=e=>s(this,void 0,void 0,(function*(){const t=yield this.interact({event:o.EVENTS.SIGN_TRANSACTION,data:e.serialize({requireAllSignatures:!1,verifySignatures:!1}),timeout:20*o.TIMEOUT});return i.Transaction.from(t)})),this.id=e+"-iframe",this.messenger=new r.Messenger({name:this.id,verbose:n})}}},45263:(e,t,n)=>{"use strict";e.exports=n(62175)},17100:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/logo.4eec7392e81c8bf748fa.png"},46601:()=>{},89214:()=>{},85568:()=>{},55024:()=>{}}]);
//# sourceMappingURL=640.d1559cdb.chunk.js.map