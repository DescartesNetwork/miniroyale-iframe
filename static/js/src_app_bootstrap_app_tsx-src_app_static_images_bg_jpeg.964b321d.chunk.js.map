{"version":3,"file":"static/js/src_app_bootstrap_app_tsx-src_app_static_images_bg_jpeg.964b321d.chunk.js","mappings":"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","sources":["shared/antd/embededView.tsx","app/configs/manifest.config.ts","app/configs/sol.config.ts","app/configs/index.ts","app/view/index.tsx","app/model/devTools.ts","app/model/main.controller.tsx","app/model/index.ts","app/bootstrap.app.tsx","shared/runtime.ts","shared/storage.ts"],"sourcesContent":["import { useEffect, useMemo } from 'react'\nimport { Gateway } from '@sentre/connector'\nimport { useUI } from '@senhub/providers'\n\nexport type EmbededViewProps = {\n  appId: string\n  src: string\n  title: string\n  background?: { light: string; dark: string }\n}\n\nconst EmbededView = ({ appId, src, title, background }: EmbededViewProps) => {\n  const { setBackground } = useUI()\n  // This trick is to avoid render loop if user directly pass in an object\n  const theme = useMemo(() => JSON.stringify(background), [background])\n  // Set theme\n  useEffect(() => {\n    if (theme) setBackground(JSON.parse(theme))\n  }, [setBackground, theme])\n  // Setup wallet gateway\n  useEffect(() => {\n    const gateway = new Gateway(window.sentre.wallet)\n    return gateway.terminate\n  }, [])\n\n  return (\n    <iframe\n      id={appId + '-iframe'}\n      src={src}\n      title={title}\n      style={{\n        height: 'calc(100vh - 64px)',\n        margin: -12,\n        marginTop: -24,\n        border: 'none',\n        width: '100vw',\n      }}\n      loading=\"lazy\"\n      allowFullScreen\n    />\n  )\n}\n\nexport default EmbededView\n","import { Env } from 'shared/runtime'\n\nif (\n  typeof process.env.REACT_APP_ID !== 'string' ||\n  typeof process.env.REACT_APP_URL !== 'string'\n)\n  throw new Error('Please add REACT_APP_ID, REACT_APP_URL in .env!')\n\n/**\n * Contructor\n */\n\ntype Conf = {\n  appId: string\n  url: string\n}\n\nconst shared = {\n  appId: process.env.REACT_APP_ID,\n  url: process.env.REACT_APP_URL,\n}\n\nconst conf: Record<Env, Conf> = {\n  /**\n   * Development configurations\n   */\n  development: {\n    ...shared,\n  },\n\n  /**\n   * Staging configurations\n   */\n  staging: {\n    ...shared,\n  },\n\n  /**\n   * Production configurations\n   */\n  production: {\n    ...shared,\n  },\n}\n\n/**\n * Module exports\n */\nexport default conf\n","import { Net } from 'shared/runtime'\n\n/**\n * Contructor\n */\ntype Conf = {\n  node: string\n  spltAddress: string\n  splataAddress: string\n}\n\nconst conf: Record<Net, Conf> = {\n  /**\n   * Development configurations\n   */\n  devnet: {\n    node: 'https://api.devnet.solana.com',\n    spltAddress: 'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA',\n    splataAddress: 'ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL',\n  },\n\n  /**\n   * Staging configurations\n   */\n  testnet: {\n    node: 'https://api.testnet.solana.com',\n    spltAddress: 'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA',\n    splataAddress: 'ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL',\n  },\n\n  /**\n   * Production configurations\n   */\n  mainnet: {\n    node: 'https://api.mainnet-beta.solana.com',\n    spltAddress: 'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA',\n    splataAddress: 'ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL',\n  },\n}\n\n/**\n * Module exports\n */\nexport default conf\n","import { env, net } from 'shared/runtime'\nimport manifest from './manifest.config'\nimport sol from './sol.config'\n\nconst configs = {\n  manifest: manifest[env],\n  sol: sol[net],\n}\n\n/**\n * Module exports\n */\nexport default configs\n","import EmbededView from 'shared/antd/embededView'\n\nimport configs from 'app/configs'\nimport BG from 'app/static/images/bg.jpeg'\n\nconst {\n  manifest: { appId },\n} = configs\n\nconst View = () => {\n  return (\n    <EmbededView\n      appId={appId}\n      src={'https://miniroyale.io/'}\n      title=\"Mini Royale: Open economy FPS on #Solana.\"\n      background={{ light: BG, dark: BG }}\n    />\n  )\n}\n\nexport default View\n","import { PublicKey } from '@solana/web3.js'\nimport BN from 'bn.js'\n\n// Bugfix performance\n// https://github.com/zalmoxisus/redux-devtools-extension/blob/master/docs/Troubleshooting.md#excessive-use-of-memory-and-cpu\nexport const devTools = (appName: string): any => {\n  if (process.env.REACT_APP_ENV !== 'development') return false\n  return {\n    name: appName,\n    actionSanitizer: ({ payload, type }: { payload: any; type: string }) => ({\n      payload,\n      type,\n    }),\n  }\n}\n\n// BigInt Serialization Middleware\n// https://redux-toolkit.js.org/api/serializabilityMiddleware\nconst isPlain = (val: any): boolean => {\n  const isPlainObject = (obj: object): boolean => {\n    if (obj === null) return false\n    const proto = Object.getPrototypeOf(obj)\n    return proto !== null && Object.getPrototypeOf(proto) === null\n  }\n  return (\n    typeof val === 'undefined' ||\n    val === null ||\n    typeof val === 'string' ||\n    typeof val === 'boolean' ||\n    typeof val === 'number' ||\n    Array.isArray(val) ||\n    isPlainObject(val) ||\n    typeof val === 'bigint' ||\n    val instanceof PublicKey ||\n    val instanceof BN ||\n    val instanceof Buffer\n  )\n}\nBigInt.prototype.toJSON = function () {\n  return this.toString() // https://github.com/GoogleChromeLabs/jsbi/issues/30\n}\nexport const bigintSerializationMiddleware = {\n  serializableCheck: {\n    isSerializable: isPlain,\n  },\n}\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\n\n/**\n * Interface & Utility\n */\n\nexport type State = {\n  counter: number\n}\n\n/**\n * Store constructor\n */\n\nconst NAME = 'main'\nconst initialState: State = {\n  counter: 0,\n}\n\n/**\n * Actions\n */\n\nexport const increaseCounter = createAsyncThunk<State, void, { state: any }>(\n  `${NAME}/increaseCounter`,\n  async (_, { getState }) => {\n    const {\n      main: { counter },\n    } = getState()\n    return { counter: counter + 1 }\n  },\n)\n\n/**\n * Usual procedure\n */\n\nconst slice = createSlice({\n  name: NAME,\n  initialState,\n  reducers: {},\n  extraReducers: (builder) =>\n    void builder.addCase(\n      increaseCounter.fulfilled,\n      (state, { payload }) => void Object.assign(state, payload),\n    ),\n})\n\nexport default slice.reducer\n","import { configureStore } from '@reduxjs/toolkit'\nimport { devTools, bigintSerializationMiddleware } from 'app/model/devTools'\n\nimport main from 'app/model/main.controller'\n\n/**\n * Isolated store\n */\nconst model = configureStore({\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware(bigintSerializationMiddleware),\n  devTools: devTools(process.env.REACT_APP_ID as string),\n  reducer: {\n    main,\n  },\n})\n\nexport type AppState = ReturnType<typeof model.getState>\nexport type AppDispatch = typeof model.dispatch\nexport default model\n","import { Provider } from 'react-redux'\nimport { UIProvider } from '@senhub/providers'\n\nimport View from 'app/view'\n\nimport model from 'app/model'\nimport configs from 'app/configs'\n\nconst {\n  manifest: { appId },\n} = configs\n\nexport const Page = () => {\n  return (\n    <UIProvider appId={appId} antd>\n      <Provider store={model}>\n        <View />\n      </Provider>\n    </UIProvider>\n  )\n}\n","import storage from './storage'\n\n/**\n * Environment\n */\nconst getEnv = () => {\n  switch (process.env.REACT_APP_ENV) {\n    case 'development':\n      return 'development'\n    case 'staging':\n      return 'staging'\n    case 'production':\n      return 'production'\n    default:\n      return 'development'\n  }\n}\nexport type Env = 'development' | 'staging' | 'production'\nexport const env: Env = getEnv()\n\n/**\n * Network\n */\nconst getNetwork = () => {\n  switch (storage.get('network')) {\n    case 'devnet':\n      return 'devnet'\n    case 'testnet':\n      return 'testnet'\n    case 'mainnet':\n      return 'mainnet'\n    default:\n      return 'mainnet'\n  }\n}\nexport type Net = 'devnet' | 'testnet' | 'mainnet'\nexport const net: Net = getNetwork()\n\nexport const onSwitchNetwork = (value: Net) => {\n  storage.set('network', value)\n  return window.location.reload()\n}\n\n/**\n * Chain ID\n */\nconst getChainId = () => {\n  switch (net) {\n    case 'devnet':\n      return 103\n    case 'testnet':\n      return 102\n    case 'mainnet':\n      return 101\n    default:\n      return 101\n  }\n}\nexport type ChainId = 101 | 102 | 103\nexport const chainId: ChainId = getChainId()\n\n/**\n * RPC Node\n */\nconst CLUSTERS: Record<Net, string> = {\n  devnet: 'https://api.devnet.solana.com',\n  testnet: 'https://api.testnet.solana.com',\n  mainnet:\n    env === 'development'\n      ? 'https://api.mainnet-beta.solana.com'\n      : 'https://solitary-autumn-water.solana-mainnet.quiknode.pro/dcbac9d444818a20ac583541dec35b44c6840888/',\n}\nexport const rpc: string = CLUSTERS[net]\n","const KEY = 'sentre'\nconst driver = window.localStorage\n\nconst convert = (value: string | null) => {\n  try {\n    if (!value) return null\n    return JSON.parse(value)\n  } catch (e) {\n    return null\n  }\n}\n\nconst storage = {\n  set: (key: string, value: any) => {\n    let data = convert(driver.getItem(KEY))\n    if (!data || typeof data !== 'object') data = {}\n    data[key] = value\n    driver.setItem(KEY, JSON.stringify(data))\n  },\n  get: (key: string) => {\n    let data = convert(driver.getItem(KEY))\n    if (!data || typeof data !== 'object') return null\n    return data[key]\n  },\n  clear: (key: string) => {\n    storage.set(key, null)\n  },\n}\n\nexport default storage\n"],"names":["appId","src","title","background","setBackground","useUI","theme","useMemo","JSON","stringify","useEffect","parse","Gateway","window","sentre","wallet","terminate","id","style","height","margin","marginTop","border","width","loading","allowFullScreen","shared","process","url","devnet","node","spltAddress","splataAddress","testnet","mainnet","manifest","development","staging","production","env","sol","net","configs","light","BG","dark","BigInt","prototype","toJSON","this","toString","bigintSerializationMiddleware","serializableCheck","isSerializable","val","Array","isArray","obj","proto","Object","getPrototypeOf","isPlainObject","PublicKey","BN","Buffer","NAME","increaseCounter","createAsyncThunk","async","_","getState","main","counter","createSlice","name","initialState","reducers","extraReducers","builder","addCase","fulfilled","state","payload","assign","configureStore","middleware","getDefaultMiddleware","devTools","reducer","Page","UIProvider","antd","Provider","store","model","storage","getNetwork","chainId","getChainId","rpc","KEY","driver","localStorage","convert","value","e","set","key","data","getItem","setItem","get","clear"],"sourceRoot":""}